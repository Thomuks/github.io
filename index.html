<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manga Detektyvas</title>
    <style>
        body {
            font-family: 'Verdana', 'Marker Felt', sans-serif; /* Manga-like font */
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-29c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm63 59c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-57-5c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-28 28c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm74-28c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zM30 87c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm44-20c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z' fill='%23a0a0a0' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E"); /* Subtle dot pattern */
            overflow: hidden; /* To prevent scrollbars during animations */
        }

        .container {
            text-align: center;
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border: 3px solid #000; /* Manga panel border */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 30px;
            color: #000;
            text-shadow: 2px 2px #fff, 4px 4px #aaa; /* Manga title effect */
        }

        .game-selection button {
            background-color: #000; /* Black buttons like manga ink */
            color: #fff;
            border: 2px solid #fff;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.3s ease;
            box-shadow: 3px 3px 0 #aaa; /* 3D effect */
        }

        .game-selection button:hover {
            transform: scale(1.05) translateY(-2px);
            background-color: #333;
        }

        .game-selection button:active {
            transform: scale(1.02) translateY(0);
            box-shadow: 1px 1px 0 #aaa;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6); /* Darker overlay */
            animation: fadeInModal 0.5s ease-out;
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto; /* Centered */
            padding: 30px;
            border: 5px solid #000; /* Stronger border for modal */
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            animation: slideInModal 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            transform: translateY(-50px); /* Initial position for slide-in */
            opacity: 0; /* Start transparent for animation */
        }

        @keyframes fadeInModal {
            from { background-color: rgba(0,0,0,0); }
            to { background-color: rgba(0,0,0,0.6); }
        }

        @keyframes slideInModal {
            0% {
                transform: translateY(-80px) scale(0.8);
                opacity: 0;
            }
            70% {
                transform: translateY(10px) scale(1.02);
                opacity: 1;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .modal h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #d32f2f; /* Dramatic red for titles */
        }

        .choices button {
            display: block;
            width: calc(100% - 40px);
            background-color: #eee;
            color: #333;
            border: 2px solid #555;
            padding: 12px 20px;
            margin: 10px auto;
            font-size: 1.1em;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, transform 0.1s;
        }

        .choices button:hover:not([disabled]) {
            background-color: #ddd;
            transform: translateX(5px); /* Slight shift on hover */
        }

        .choices button.correct {
            background-color: #4CAF50; /* Green */
            color: white;
            border-color: #388E3C;
        }

        .choices button.incorrect {
            background-color: #f44336; /* Red */
            color: white;
            border-color: #D32F2F;
        }

        .choices button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        #feedback {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: bold;
            height: 30px; /* Reserve space to prevent layout shifts */
        }

        #feedback.correct-text {
            color: #4CAF50;
        }

        #feedback.incorrect-text {
            color: #f44336;
        }

        #next-button, #restart-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            margin-top: 20px;
            font-size: 1.1em;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: none; /* Hidden initially */
        }

        #next-button:hover, #restart-button:hover {
            background-color: #0056b3;
        }

        /* Manga style lines/effects (optional) */
        .speed-lines {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px; /* Adjust as needed */
            height: 300px; /* Adjust as needed */
            transform: translate(-50%, -50%);
            pointer-events: none; /* So they don't interfere with clicks */
            opacity: 0;
            animation: speedLinesEffect 0.5s ease-out forwards;
        }

        .speed-lines span {
            position: absolute;
            background-color: #333;
            opacity: 0.7;
        }

        /* Example of a few lines for the effect */
        .speed-lines .line1 { width: 2px; height: 100px; top: 0; left: 50%; transform: translateX(-50%) rotate(10deg); }
        .speed-lines .line2 { width: 1px; height: 120px; top: 20px; left: 40%; transform: translateX(-50%) rotate(-5deg); }
        .speed-lines .line3 { width: 2px; height: 90px; top: 10px; left: 60%; transform: translateX(-50%) rotate(25deg); }
        /* Add more for a better effect */

        @keyframes speedLinesEffect {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            to { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        }

    </style>
</head>
<body>

    <div class="container" id="main-container">
        <h1>Pasirinkite užduotį</h1>
        <div class="game-selection">
            <button id="game1-btn">Paslaptingas pagrobimas</button>
            <button id="game2-btn">Dingusio komikso byla</button>
        </div>
    </div>

    <div id="game-modal" class="modal">
        <div class="modal-content">
            <div id="speed-lines-container"></div> <h2 id="modal-title">Paslaptingas pagrobimas</h2>
            <div id="question-area">
                </div>
            <div id="feedback"></div>
            <button id="next-button">Toliau</button>
            <button id="restart-button">Į pradžią</button>
        </div>
    </div>

    <script>
        const gameModal = document.getElementById('game-modal');
        const modalTitle = document.getElementById('modal-title');
        const questionArea = document.getElementById('question-area');
        const feedbackDiv = document.getElementById('feedback');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        const game1Button = document.getElementById('game1-btn');
        const game2Button = document.getElementById('game2-btn');
        const mainContainer = document.getElementById('main-container');
        const speedLinesContainer = document.getElementById('speed-lines-container');

        let currentGame = '';
        let currentStep = 0;
        let questions = {};

        const game1Questions = [
            {
                questionText: "Atvykote į nusikaltimo vietą, kokį veiksmą atliksite pirmiausia?",
                choices: [
                    { text: "įvykio vietos apžiūra", correct: true },
                    { text: "susisiekti su dingusiojo pažįstamais", correct: false },
                    { text: "susisiekti su renginio organizatoriais", correct: false }
                ]
            },
            {
                questionText: "Kas galėtų būti kaip nusikaltimo įrodymas?",
                choices: [
                    { text: "vėžės", correct: true },
                    { text: "čekis", correct: false },
                    { text: "puodelis", correct: false }
                ]
            },
            {
                questionText: "Kokios transporto priemonės vėžės nusikaltimo vietoje?",
                choices: [
                    { text: "motociklas", correct: false },
                    { text: "sportinis automobilis", correct: false },
                    { text: "vilkikas", correct: true }
                ]
            },
            {
                questionText: "Žinant kokia transporto priemonė buvo nusikaltimo vietoje, kokį žingsnį atliksite toliau?",
                choices: [
                    { text: "peržiūrėti vaizdo stebėjimo kameras", correct: true },
                    { text: "ieškoti duomenų bazėje", correct: false },
                    { text: "laukti kol atsiras liudininkai", correct: false }
                ]
            },
            {
                questionText: "Kurie numeriai labiausiai išsiskyrė įraše?",
                choices: [
                    { text: "NKP123", correct: false },
                    { text: "DBZ900", correct: true },
                    { text: "AKP332", correct: false }
                ]
            },
            {
                questionText: "Koks sekantis žingsnis?",
                choices: [
                    { text: "važiuoti įmonės adresu", correct: true },
                    { text: "išgerti kavos", correct: false },
                    { text: "tikrinti telefono išklotinę", correct: false }
                ]
            },
            {
                questionText: "Kaip pateksi į sandėlį?",
                choices: [
                    { text: "naudoti termovizorių", correct: false },
                    { text: "įsilaužti į konteinerius", correct: true },
                    { text: "suimti visus sandelio darbuotojus", correct: false }
                ]
            }
        ];

        // Placeholder for game 2 questions - will be defined when info is provided
        const game2Questions = [
            // {
            //     questionText: "Game 2 - Question 1?",
            //     choices: [
            //         { text: "G2 Opt1", correct: true },
            //         { text: "G2 Opt2", correct: false },
            //         { text: "G2 Opt3", correct: false }
            //     ]
            // }
        ];


        function showSpeedLines() {
            speedLinesContainer.innerHTML = `
                <div class="speed-lines">
                    <span class="line1"></span><span class="line2"></span><span class="line3"></span>
                    <span style="width: 1.5px; height: 80px; top: 70%; left: 45%; transform: translateX(-50%) rotate(-20deg);"></span>
                    <span style="width: 2.5px; height: 110px; top: 60%; left: 55%; transform: translateX(-50%) rotate(15deg);"></span>
                </div>`;
            // Remove after animation
            setTimeout(() => {
                speedLinesContainer.innerHTML = '';
            }, 600);
        }

        function startGame(gameId) {
            currentGame = gameId;
            currentStep = 0;
            if (gameId === 'game1') {
                questions = game1Questions;
                modalTitle.textContent = 'Paslaptingas pagrobimas';
            } else if (gameId === 'game2') {
                if (game2Questions.length === 0) {
                    alert("Antras žaidimas ('Dingusio komikso byla') dar neparuoštas!");
                    return;
                }
                questions = game2Questions;
                modalTitle.textContent = 'Dingusio komikso byla';
            } else {
                return; // Should not happen
            }

            mainContainer.style.display = 'none';
            gameModal.style.display = 'flex';
            showSpeedLines();
            feedbackDiv.textContent = '';
            feedbackDiv.className = '';
            nextButton.style.display = 'none';
            restartButton.style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            if (currentStep >= questions.length) {
                finishGame();
                return;
            }

            const currentQuestion = questions[currentStep];
            questionArea.innerHTML = ''; // Clear previous choices

            // Optional: Display question text if you have one per step
            const questionTextElement = document.createElement('p');
            questionTextElement.textContent = currentQuestion.questionText || `Klausimas ${currentStep + 1}`;
            questionTextElement.style.fontSize = "1.4em";
            questionTextElement.style.marginBottom = "15px";
            questionArea.appendChild(questionTextElement);

            const choicesDiv = document.createElement('div');
            choicesDiv.className = 'choices';

            currentQuestion.choices.forEach(choice => {
                const button = document.createElement('button');
                button.textContent = choice.text;
                button.onclick = () => handleAnswer(button, choice.correct, choicesDiv);
                choicesDiv.appendChild(button);
            });
            questionArea.appendChild(choicesDiv);
        }

        function handleAnswer(button, isCorrect, choicesContainer) {
            const buttons = choicesContainer.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true); // Disable all buttons after one is clicked

            if (isCorrect) {
                button.classList.add('correct');
                feedbackDiv.textContent = 'Teisingas atsakymas!';
                feedbackDiv.className = 'correct-text';
                nextButton.style.display = 'inline-block';
                restartButton.style.display = 'none'; // Hide restart if it was shown for incorrect
            } else {
                button.classList.add('incorrect');
                feedbackDiv.textContent = 'Neteisingas atsakymas.';
                feedbackDiv.className = 'incorrect-text';
                nextButton.style.display = 'none';
                // Allow clicking other options
                buttons.forEach(btn => {
                    if (btn !== button) { // Re-enable other buttons
                        btn.disabled = false;
                    }
                });
                button.disabled = true; // Keep the incorrect one disabled
            }
        }

        function nextStep() {
            currentStep++;
            feedbackDiv.textContent = '';
            feedbackDiv.className = '';
            nextButton.style.display = 'none';
            loadQuestion();
        }

        function finishGame() {
            questionArea.innerHTML = `<p style="font-size: 1.8em; color: #28a745;">Sveikiname įvykdžius užduotį!</p>`;
            feedbackDiv.textContent = '';
            nextButton.style.display = 'none';
            restartButton.style.display = 'inline-block';
        }

        function resetGame() {
            gameModal.style.display = 'none';
            mainContainer.style.display = 'block'; // Show main selection screen
            currentGame = '';
            currentStep = 0;
            questionArea.innerHTML = '';
            feedbackDiv.textContent = '';
            feedbackDiv.className = '';
            nextButton.style.display = 'none';
            restartButton.style.display = 'none';
        }

        game1Button.onclick = () => startGame('game1');
        game2Button.onclick = () => startGame('game2'); // Will show alert if not configured
        nextButton.onclick = nextStep;
        restartButton.onclick = resetGame;

        // Close modal if clicked outside the content (optional)
        window.onclick = function(event) {
            if (event.target == gameModal) {
                // Only reset if no game is actively in progress or if desired
                // For now, let's keep it simple and not close on outside click during game
                // resetGame();
            }
        }

    </script>

</body>
</html>